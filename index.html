<!DOCTYPE html>
<html lang="es">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Horas</title>
    <link rel="stylesheet" href="styles/tailwind.css">
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  </head>

  <body class="font-sans bg-white text-black text-center p-5 pb-20 m-0 dark:bg-black dark:text-white">

    <main id="main" class="py-5">
      <h1 class="mb-5 text-2xl font-bold">⏰ Registro de Horas</h1>

      <div class="mb-5 flex gap-2 flex-wrap justify-center">
          <input type="text" id="actividad" placeholder="Actividad" class="px-3 py-2.5 mx-1 border border-black rounded text-base dark:bg-black dark:text-white dark:border-white">
        <button onclick="iniciar()" class="px-3 py-2.5 mx-1 border border-black rounded cursor-pointer bg-white text-black hover:bg-gray-100 dark:bg-black dark:text-white dark:border-white dark:hover:bg-gray-800">Iniciar</button>
        <button onclick="finalizar()" class="px-3 py-2.5 mx-1 border border-black rounded cursor-pointer bg-white text-black hover:bg-gray-100 dark:bg-black dark:text-white dark:border-white dark:hover:bg-gray-800">Finalizar</button>
      </div>
  
      <div id="main-content" class="max-w-[90%] mx-auto transition-all duration-300">
        <div id="resumen"></div>
        <div id="suma-seleccion"></div>
      </div>
    </main>

    <!-- Sidebar de grupos -->
    <div id="groups-sidebar" class="fixed top-0 right-0 w-[260px] h-screen bg-white border-l border-black shadow-[-2px_0_8px_rgba(0,0,0,0.1)] z-[100] flex flex-col overflow-hidden dark:bg-black dark:border-white transition-transform duration-300 translate-x-0">
      <div class="p-4 border-b border-black bg-white dark:bg-black dark:border-white flex items-center justify-between">
        <h3 class="m-0 text-xl text-black dark:text-white">Grupos</h3>
        <button id="toggle-sidebar-btn" class="bg-transparent border-none cursor-pointer text-black dark:text-white hover:opacity-70 transition-opacity p-1" title="Ocultar grupos">
          <i class="fa-solid fa-chevron-right"></i>
        </button>
      </div>

      <div class="px-4 py-4 border-b border-black bg-white dark:bg-black dark:border-white">
        <div class="flex gap-1.5">
          <input type="text" id="input-grupo-nombre" placeholder="Nuevo grupo" class="flex-1 px-2 py-2 border border-black rounded text-sm dark:bg-black dark:text-white dark:border-white">
          <button id="btn-crear-grupo" class="px-3 py-2 bg-black text-white border border-black rounded cursor-pointer text-sm transition-colors hover:bg-gray-800 dark:bg-white dark:text-black dark:border-white dark:hover:bg-gray-200"><i class="fa-solid fa-plus"></i></button>
        </div>
      </div>

      <div id="groups-list" class="flex-1 overflow-y-auto p-2.5"></div>
    </div>

    <!-- Botón para mostrar sidebar cuando está oculto -->
    <button id="show-sidebar-btn" class="hidden fixed top-5 right-5 bg-white border border-black rounded-full w-10 h-10 cursor-pointer z-[2000] shadow-[0_2px_8px_rgba(0,0,0,0.15)] transition-all hover:bg-gray-100 dark:bg-black dark:text-white dark:border-white dark:hover:bg-gray-800 flex items-center justify-center" title="Mostrar grupos">
      <i class="fa-solid fa-chevron-left"></i>
    </button>
    
    <!-- Botón de ayuda abajo a la izquierda -->
    <button id="ayuda-btn" title="Ayuda" class="fixed bottom-5 left-5 text-2xl bg-white border border-black rounded-full w-11 h-11 cursor-pointer z-[2000] shadow-[0_2px_8px_rgba(0,0,0,0.15)] transition-colors hover:bg-gray-100 dark:bg-black dark:text-white dark:border-white dark:hover:bg-gray-800"><i class="fa-solid fa-circle-question"></i></button>
    
    <!-- Modal de ayuda -->
    <div id="modal-ayuda" class="hidden fixed z-[1000] inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center">
      <div class="bg-white p-8 rounded-xl shadow-[0_4px_20px_rgba(0,0,0,0.2)] min-w-[350px] max-w-[90%] relative text-left animate-[modalAppear_0.2s_ease-out] dark:bg-[#23272f] dark:text-[#e0e6ef] dark:shadow-[0_4px_20px_rgba(0,0,0,0.4)]">
        <span class="close absolute top-2.5 right-4 text-2xl cursor-pointer" id="closeAyuda"><i class="fa-solid fa-xmark"></i></span>
        <h2 class="mt-0">Ayuda e Instrucciones</h2>
        <ul>
          <li>Haz clic en una sesión para seleccionarla. Usa Ctrl/Cmd para selección múltiple, Shift para rango.</li>
          <li>Presiona <b class="inline-block px-1.5 py-0.5 bg-white rounded border border-black font-mono text-sm my-0 mx-0.5 dark:bg-black dark:border-white">Suprimir</b> o <b class="inline-block px-1.5 py-0.5 bg-white rounded border border-black font-mono text-sm my-0 mx-0.5 dark:bg-black dark:border-white">Backspace</b> para eliminar las seleccionadas (requiere contraseña <b class="inline-block px-1.5 py-0.5 bg-white rounded border border-black font-mono text-sm my-0 mx-0.5 dark:bg-black dark:border-white">delete</b>).</li>
          <li>Presiona <b class="inline-block px-1.5 py-0.5 bg-white rounded border border-black font-mono text-sm my-0 mx-0.5 dark:bg-black dark:border-white">Enter</b> sobre una sola sesión seleccionada para editarla.</li>
          <li>Presiona <b class="inline-block px-1.5 py-0.5 bg-white rounded border border-black font-mono text-sm my-0 mx-0.5 dark:bg-black dark:border-white">Escape</b> para abrir el modal y agregar una sesión manualmente.</li>
          <li>La suma de tiempo de las sesiones seleccionadas aparece debajo del historial.</li>
          <li>Puedes alternar el tema claro/oscuro con el botón en la esquina inferior derecha.</li>
        </ul>
      </div>
    </div>
    
    <!-- Botón de tema oscuro -->
    <button id="tema-btn" title="Cambiar tema" class="fixed bottom-5 right-5 bg-white text-black border border-black rounded-full w-11 h-11 text-2xl shadow-[0_2px_8px_rgba(0,0,0,0.15)] cursor-pointer z-[2000] transition-colors hover:bg-gray-100 dark:bg-black dark:text-white dark:border-white dark:hover:bg-gray-800"><i class="fa-solid fa-moon"></i></button>
    
    <!-- Modal para agregar registro manualmente -->
    <div id="modal" class="hidden fixed z-[1000] inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center">
      <div class="bg-white p-8 rounded-xl shadow-[0_4px_20px_rgba(0,0,0,0.2)] min-w-[300px] max-w-[90%] relative text-left animate-[modalAppear_0.2s_ease-out] dark:bg-black dark:text-white dark:border dark:border-white">
        <span class="close absolute top-2.5 right-4 text-2xl cursor-pointer" id="closeModal"><i class="fa-solid fa-xmark"></i></span>
        <h2 class="mt-0">Agregar Sesión Manualmente</h2>
        <label class="block mb-3">Día: <input type="date" id="modal-dia" class="px-3 py-2.5 mx-1 border border-black rounded dark:bg-black dark:text-white dark:border-white"></label>
        <label class="block mb-3">Hora de inicio: <input type="time" id="modal-inicio" class="px-3 py-2.5 mx-1 border border-black rounded dark:bg-black dark:text-white dark:border-white"></label>
        <label class="block mb-3">Hora de fin: <input type="time" id="modal-fin" class="px-3 py-2.5 mx-1 border border-black rounded dark:bg-black dark:text-white dark:border-white"></label>
        <label class="block mb-3">Actividad: <input type="text" id="modal-actividad" class="px-3 py-2.5 mx-1 border border-black rounded dark:bg-black dark:text-white dark:border-white"></label>
        <label class="block mb-3">Grupo: <select id="modal-grupo" class="px-3 py-2.5 mx-1 border border-black rounded dark:bg-black dark:text-white dark:border-white"></select></label>
        <button id="modal-agregar" class="px-3 py-2.5 mx-1 border border-black rounded cursor-pointer bg-black text-white hover:bg-gray-800 dark:bg-white dark:text-black dark:border-white dark:hover:bg-gray-200">Agregar</button>
      </div>
    </div>
    
    <script type="module" src="js/app.js"></script>
  </body>

</html>